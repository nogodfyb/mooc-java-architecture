# 数据库调优的维度

![](img\1.png)

## 业务需求

![](img\2.png)

![](img\3.png)

## 系统架构

![](img\4.png)

## SQL及索引

![](img\5.png)

## 表结构

![](img\6.png)

## 数据库参数设置

![](img\7.png)

## 系统配置

![](img\8.png)

## 硬件

![](img\9.png)

# 测试数据与工具

![](img\10.png)

https://dev.mysql.com/doc/index-other.html

## 导入数据

```shell
mysql -uroot -p123 < employees.sql
```

## 检测导入数据是否正确

```shell
mysql -uroot -p123 -t < test_employees_md5.sql
```

# 慢查询日志

![](img\11.png)

![](img\12.png)

## 相关参数

![](img\13.png)

## 使用方式

![](img\14.png)

开启日志

```sql
set global slow_query_log = 'on'
```

```sql
set global log_output = 'FILE,TABLE'
```

```sql
set global long_query_time = 0.001

show VARIABLES like '%long_query_time%'
```

```sql
set global log_queries_not_using_indexes = 'ON'
```

分析慢查询日志

```sql
select *,CONVERT(sql_text USING utf8 ) from mysql.slow_log
```

基于文件分析

```sql
show VARIABLES like '%slow_query_log_file%'
```



mysqldumpslow分析

# EXPLAIN

```
https://segmentfault.com/a/1190000008131735
```

# SQL性能分析

## navicat

![](img\15.png)

![](img\16.png)

# OPTIMIZER TRACE

# 数据库诊断命令

```sql
SHOW PROCESSLIST

SHOW STATUS

SHOW VARIABLES

SHOW TABLE STATUS

SHOW INDEX FROM employees

SHOW ENGINE INNODB status
```

